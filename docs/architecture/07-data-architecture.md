# Data Architecture

**Version:** 2.0.0
**Last Updated:** October 26, 2025

[Back to Architecture Index](README.md)

---

## File System Layout

### Global Installation (Homebrew)

```
/opt/homebrew/Cellar/catalyst/2.0.0/
├── bin/
│   └── catalyst                    # Executable (points to dist/index.js)
├── dist/                           # Compiled TypeScript
│   ├── index.js
│   ├── cli/
│   ├── core/
│   ├── mcp/
│   ├── bmad/
│   └── utils/
├── node_modules/                   # Production dependencies
├── mcp-servers/                    # Compiled MCP servers
│   ├── docker/
│   ├── postgres/
│   ├── xcode/
│   ├── storybook/
│   └── vite/
├── bundles/                        # BMAD bundles
│   └── bmad-core/
├── templates/                      # Config templates
│   ├── continue/
│   ├── project/
│   └── env/
└── package.json
```

### User Home Directory

```
~/.catalyst/
├── config.yaml                     # Global configuration
├── cache/                          # Downloaded models, etc.
├── logs/                           # Installation logs
│   ├── setup.log
│   ├── mcp-docker.log
│   └── mcp-postgres.log
└── backups/                        # Configuration backups

~/.bmad-core/                       # Symlinks to Catalyst bundles
├── agents/                         # → /opt/homebrew/.../bundles/bmad-core/agents
├── tasks/                          # → /opt/homebrew/.../bundles/bmad-core/tasks
└── templates/                      # → /opt/homebrew/.../bundles/bmad-core/templates

~/.continue/                        # Generated by Catalyst
└── config.json                     # Continue.dev configuration
```

### Project Directory

```
my-project/
├── .catalyst/
│   ├── config.yaml                 # Project configuration
│   └── cache/                      # Project-specific cache
├── .bmad-core/
│   └── core-config.yaml            # BMAD project settings
├── .env                            # Secrets (gitignored)
├── .env.example                    # Template
└── docs/                           # Generated by BMAD agents
    ├── prd.md
    ├── architecture.md
    └── stories/
```

---

## Configuration Schema

### Global Configuration (`~/.catalyst/config.yaml`)

```typescript
import { z } from 'zod';

export const GlobalConfigSchema = z.object({
  version: z.string(),
  installedAt: z.string().datetime(),

  ides: z.object({
    detected: z.array(z.enum(['vscode', 'cursor', 'windsurf'])),
    active: z.string(),
  }),

  extensions: z.object({
    continue: z.object({
      enabled: z.boolean(),
      version: z.string().optional(),
      configPath: z.string(),
    }).optional(),
    claudeCode: z.object({
      enabled: z.boolean(),
      version: z.string().optional(),
    }).optional(),
  }),

  mcpServers: z.object({
    essential: z.array(z.string()),
    optional: z.array(z.string()),
  }),

  bmad: z.object({
    version: z.string(),
    expansionPacks: z.array(z.string()),
  }),

  apiKeys: z.object({
    githubToken: z.string().optional(),
  }),

  preferences: z.object({
    telemetry: z.boolean().default(false),
    autoUpdate: z.boolean().default(true),
    logLevel: z.enum(['debug', 'info', 'warn', 'error']).default('info'),
  }),
});

export type GlobalConfig = z.infer<typeof GlobalConfigSchema>;
```

---

## Related Sections

- [Integration Architecture](06-integration-architecture.md) - How configurations are generated and used
- [Security Architecture](08-security-architecture.md) - Secure storage of sensitive data
- [CLI Architecture](03-cli-architecture.md) - Configuration management commands
